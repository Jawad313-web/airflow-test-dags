# Airflow Configuration for Git DAG Syncing Test
# This configuration tests DAG processor behavior with Git repositories

[core]
# Database
sql_alchemy_conn = sqlite:////home/jawad/airflow_test/airflow_home/airflow.db

# DAG configuration
base_log_folder = /home/jawad/airflow_test/airflow_home/logs
dags_folder = /home/jawad/airflow_test/airflow_home/dags
plugins_folder = /home/jawad/airflow_test/airflow_home/plugins

# Processor configuration - Test behavior with frequent syncs
# Set to 30 seconds to monitor DAG processor behavior
dag_file_processor_timeout = 30

# Number of seconds after which a DAG file is considered stale
dag_ignore_file_syntax_errors = False

# DAG parsing
max_num_rendered_template_fields = 30
dag_run_conf_overrides_params = True

# Priority 2: File Modification Timestamp Tracking
# Cache file stats to detect actual changes from sync mechanism
dag_file_stat_cache_ttl = 300
parse_sync_to_db = True
store_dag_code = True

# Executor
executor = LocalExecutor

# Parallelism
parallelism = 32
dag_concurrency = 16
max_active_tasks_per_dag = 16
max_active_runs_per_dag = 16

# Enable DAG file processing refresh
min_file_process_interval = 10

# Task logging
log_format = [%%(asctime)s] {%%(filename)s:%%(lineno)d} %%(levelname)s - %%(message)s

[logging]
# Enable detailed logging for DAG processor
fab_logging_level = DEBUG

[scheduler]
# Scheduler configuration for testing
catchup_by_default = False
max_dagruns_to_create_per_loop = 10
max_tis_per_query = 512

# DAG processor settings
max_consecutive_failed_dag_refresh_attempts = 3
dag_dir_list_interval = 300

[webserver]
expose_config = True

[git_provider]
# This will be used for Git DAG syncing
git_default_conn_id = git_repo
# Priority 2: Enable file hash caching for change detection
git_sync_cache_ttl = 300

[api]
enable_experimental_api = True
